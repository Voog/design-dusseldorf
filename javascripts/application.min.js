var MMCQ,PriorityQueue;PriorityQueue=function(){function t(t){this.comparator=t,this.contents=[],this.sorted=!1}return t.prototype.sort=function(){return this.contents.sort(this.comparator),this.sotred=!0},t.prototype.push=function(t){return this.contents.push(t),this.sorted=!1},t.prototype.peek=function(t){return null==t&&(t=this.contents.length-1),this.sorted||this.sort(),this.contents[t]},t.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(t){return this.contents.map(t)},t}(),MMCQ=function(){var t,e,n,o,i,r;function s(){this.maxIterations=1e3,this.fractByPopulations=.75}return s.sigbits=5,s.rshift=8-s.sigbits,o=function(t,e,n){return(t<<2*s.sigbits)+(e<<s.sigbits)+n},t=function(){function t(t,e,n,o,i,r,s){this.r1=t,this.r2=e,this.g1=n,this.g2=o,this.b1=i,this.b2=r,this.histo=s}return t.prototype.volume=function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},t.prototype.count=function(t){var e,n,i,r,s,c,a,h,l,u,f;if(!this._count_set||t){for(r=0,s=c=this.r1,l=this.r2;c<=l;s=c+=1)for(n=a=this.g1,u=this.g2;a<=u;n=a+=1)for(e=h=this.b1,f=this.b2;h<=f;e=h+=1)i=o(s,n,e),r+=this.histo[i]||0;this._count_set=!0,this._count=r}return this._count},t.prototype.copy=function(){return new t(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},t.prototype.average=function(t){var e,n,i,r,c,a,h,l,u,f,g,p,m,d,b,v;if(!this._average||t){for(h=1<<8-s.sigbits,f=0,u=0,r=0,n=0,l=g=this.r1,d=this.r2;g<=d;l=g+=1)for(i=p=this.g1,b=this.g2;p<=b;i=p+=1)for(e=m=this.b1,v=this.b2;m<=v;e=m+=1)a=o(l,i,e),f+=c=this.histo[a]||0,u+=c*(l+.5)*h,r+=c*(i+.5)*h,n+=c*(e+.5)*h;this._average=f?[~~(u/f),~~(r/f),~~(n/f)]:[~~(h*(this.r1+this.r2+1)/2),~~(h*(this.g1+this.g2+1)/2),~~(h*(this.b1+this.b2+1)/2)]}return this._average},t.prototype.contains=function(t){var e,n,o;return o=t[0]>>s.rshift,n=t[1]>>s.rshift,e=t[2]>>s.rshift,this.r1<=o&&o<=this.r2&&this.g1<=n&&n<=this.g2&&this.b1<=e&&e<=this.b2},t}(),e=function(){function t(){this.cboxes=new PriorityQueue(function(t,e){var n,o;return(n=t.count()*t.volume())>(o=e.count()*e.volume())?1:n<o?-1:0})}return t.prototype.push=function(t){return this.cboxes.push({cbox:t,color:t.average()})},t.prototype.palette=function(){return this.cboxes.map(function(t){return t.color})},t.prototype.size=function(){return this.cboxes.size()},t.prototype.map=function(t){var e,n,o;for(e=n=0,o=this.cboxes.size();n<o;e=n+=1)return this.cboxes.peek(e).cbox.contains(t)?this.cboxes.peek(e).color:this.nearest(t)},t.prototype.cboxes=function(){return this.cboxes},t.prototype.nearest=function(t){var e,n,o,i,r,s,c;for(r=function(t){return t*t},o=1e9,n=s=0,c=this.cboxes.size();s<c;n=s+=1)(e=Math.sqrt(r(t[0]-this.cboxes.peek(n).color[0])+r(t[1]-this.cboxes.peek(n).color[1])+r(t[2]-this.cboxes.peek(n).color[2])))<o&&(o=e,i=this.cboxes.peek(n).color);return i},t}(),i=function(t){var e,n,i,r,c,a,h,l,u;for(r=1<<3*s.sigbits,i=new Array(r),l=0,u=t.length;l<u;l++)h=(a=t[l])[0]>>s.rshift,n=a[1]>>s.rshift,e=a[2]>>s.rshift,i[c=o(h,n,e)]=(i[c]||0)+1;return i},n=function(e,n){var o,i,r,c,a,h,l,u,f,g,p,m;for(g=1e6,f=0,h=1e6,a=0,r=1e6,i=0,p=0,m=e.length;p<m;p++)u=(l=e[p])[0]>>s.rshift,c=l[1]>>s.rshift,o=l[2]>>s.rshift,u<g?g=u:u>f&&(f=u),c<h?h=c:c>a&&(a=c),o<r?r=o:o>i&&(i=o);return new t(g,f,h,a,r,i,n)},r=function(t,e){var n,i,r,s,c,a,h,l,u,f,g,p,m,d,b,v,y,w,C,x,_,j,k,z,M,D,P,B,Q,q;if(e.count()){if(1===e.count())return[e.copy()];if(f=e.r2-e.r1+1,c=e.g2-e.g1+1,i=e.b2-e.b1+1,h=Math.max(f,c,i),p=0,l=[],a=[],h===f)for(u=m=e.r1,j=e.r2;m<=j;u=m+=1){for(g=0,s=d=e.g1,P=e.g2;d<=P;s=d+=1)for(n=b=e.b1,B=e.b2;b<=B;n=b+=1)g+=t[o(u,s,n)]||0;p+=g,l[u]=p}else if(h===c)for(s=v=e.g1,Q=e.g2;v<=Q;s=v+=1){for(g=0,u=y=e.r1,q=e.r2;y<=q;u=y+=1)for(n=w=e.b1,k=e.b2;w<=k;n=w+=1)g+=t[o(u,s,n)]||0;p+=g,l[s]=p}else for(n=C=e.b1,z=e.b2;C<=z;n=C+=1){for(g=0,u=x=e.r1,M=e.r2;x<=M;u=x+=1)for(s=_=e.g1,D=e.g2;_<=D;s=_+=1)g+=t[o(u,s,n)]||0;p+=g,l[n]=p}return l.forEach(function(t,e){return a[e]=p-t}),r=function(t){var n,o,i,r,s,c,h,u,f,g,m;for(c=t+"2",h=g=e[s=t+"1"],m=e[c];g<=m;h=g+=1)if(l[h]>p/2){for(n=e.copy(),o=e.copy(),r=(u=h-e[s])<=(f=e[c]-h)?Math.min(e[c]-1,~~(h+f/2)):Math.max(e[s],~~(h-1-u/2));!l[r];)r++;for(i=a[r];!i&&l[r-1];)i=a[--r];return n[c]=r,o[s]=n[c]+1,[n,o]}},h===f?r("r"):h===c?r("g"):h===i?r("b"):void 0}},s.prototype.quantize=function(t,o){var s,c,a,h,l,u,f=this;if(!t.length||o<2||o>256)return console.log("invalid arguments"),!1;for(a=i(t),s=n(t,a),(l=new PriorityQueue(function(t,e){var n,o;return(n=t.count())>(o=e.count())?1:n<o?-1:0})).push(s),(h=function(t,e){var n,o,i,c,h;for(c=1,h=0;h<f.maxIterations;)if((s=t.pop()).count()){if(n=(i=r(a,s))[0],o=i[1],!n)return void console.log("cbox1 not defined; shouldn't happen");if(t.push(n),o&&(t.push(o),c++),c>=e)return;if(h++>f.maxIterations)return void console.log("infinite loop; perhaps too few pixels")}else t.push(s),h++})(l,this.fractByPopulations*o),u=new PriorityQueue(function(t,e){var n,o;return(n=t.count()*t.volume())>(o=e.count()*e.volume())?1:n<o?-1:0});l.size();)u.push(l.pop());for(h(u,o-u.size()),c=new e;u.size();)c.push(u.pop());return c},s}.call(this),function(){window.ColorExtract=function(){function t(){}return t.getColorMap=function(t,e,n,o,i,r){var s,c,a,h,l,u,f,g,p,m;for(null==r&&(r=8),a=t.getContext("2d").getImageData(e,n,o,i).data,h=[],u=f=n,p=n+i;f<p;u=f+=1)for(c=u*o*4,l=g=e,m=e+o;g<m;l=g+=1)s=c+4*l,h.push([a[s],a[s+1],a[s+2]]);return(new MMCQ).quantize(h,r)},t.colorDist=function(t,e){var n;return(n=function(t){return t*t})(t[0]-e[0])+n(t[1]-e[1])+n(t[2]-e[2])},t.extract=function(e,n,o){var i,r,s,c,a,h,l,u,f,g,p,m,d;for(n.width=25,n.height=25,n.getContext("2d").drawImage(e,0,0,n.width,n.height),(r=t.getColorMap(n,0,0,n.width,n.height,4).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,e){return e.count-t.count}),i=r[0].rgb,(l=t.getColorMap(n,0,0,e.width,e.height,10).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,e){return e.count-t.count}),u=0,g=0,m=l.length;g<m;g++)s=l[g],(c=t.colorDist(i,s.rgb))>u&&(u=c,a=s.rgb);for(u=0,p=0,d=l.length;p<d;p++)s=l[p],(c=t.colorDist(i,s.rgb))>u&&s.rgb!==a&&(u=c,h=s.rgb);return o({bgColor:(f=function(t){return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"})(i),fgColor:f(a),fgColor2:f(h)})},t}()}.call(this),function(t){t(function(){var r,s=function(t,e,n){var o;return function(){var i=this,r=arguments,s=n&&!o;clearTimeout(o),o=setTimeout(function(){o=null,n||t.apply(i,r)},e),s&&t.apply(i,r)}};if(t(".js-popup-menu").jsPopupMenu(),t("html").hasClass("no-placeholder")&&t('input[type="text"],textarea').each(function(){t(this).attr("placeholder")&&!t(this).val()&&t(this).val(t(this).attr("placeholder")),t(this).focus(function(){t(this).val()==t(this).attr("placeholder")&&t(this).val("")}).blur(function(){!t(this).val()&&t(this).attr("placeholder")&&t(this).val(t(this).attr("placeholder"))})}),t(".form_fields:not(.edy-fe-fields) select, .custom-select").jqSelect(),t("body:not(.editmode) table").each(function(){t(this).wrap('<div class="table-holder" />')}),t(".mobile-menu-toggler").click(function(e){e.preventDefault(),t("body").toggleClass("mobilemenu-open"),t("body").removeClass("mobilesearch-open"),t(".edy-ecommerce-shopping-cart-button").hide()}),t(".mobile-menu-close").on("click",function(e){e.preventDefault(),t("body").hasClass("language-menu-open")?t("body").removeClass("language-menu-open"):t("body").removeClass("mobilemenu-open"),t(".edy-ecommerce-shopping-cart-button").length>0&&(t("body").addClass("edy-checkout-button-visible"),t(".edy-ecommerce-shopping-cart-button").show())}),t(".language-menu-btn").on("click",function(e){e.preventDefault(),t("body").addClass("language-menu-open")}),t(".comment-form-focus-input").focus(function(){t(this).hide();t(this).closest(".comment-form").find(".form_area").show().find("textarea").focus(),o()}),t("body").hasClass("editmode")&&(i(),t(window).resize(s(i,100))),t("body").hasClass("front-page")){e(),t(window).resize(s(e,100));var c=(r=0,function(t,e){clearTimeout(r),r=setTimeout(t,e)});t("html").hasClass("editmode")&&t(".center-row .content-inner").keyup(function(){c(function(){n()},350)})}t("body").hasClass("front-page")||(o(),t(window).resize(s(o,100))),t(".comment-form").hasClass("form_with_errors")?t("html, body").scrollTop(t(".comment-form").offset().top):t("form").find(".form_error, .form_notice").length>0&&t("html, body").scrollTop(t(".form_error, .form_notice").closest("form").offset().top)});var e=function(){t(".main-menu").removeAttr("style"),t(".header-row .content-full").removeAttr("style"),t(".center-row .content-inner").removeAttr("style"),t(".center-row .content-inner .inner-bottom").removeAttr("style");var e=Math.round(.31*t(window).height()),n=(t(".header-row .content-full").css("min-height",e),t(window).height(),t(document).height()),o=t(".topbar").height(),i=t(".header-row").height(),r=t(".center-row").height(),s=t(".footer-row").height(),c=n-s-i-2*parseInt(t(".center-row .inner-padding").css("padding-top")),a=n-i-r-s,h=n-i-r-s-o;if(t(document).width()>=1024){if(t("html").hasClass("editmode"))t("#edy-bar").height(),t(".center-row .content-inner").css("min-height",c);else t(".center-row .content-inner").css("min-height",c);var l=t(".content-left .content-inner").height(),u=t(".content-right .content-inner").height(),f=t(".content-left .content-inner .inner-bottom").height(),g=t(".content-right .content-inner .inner-bottom").height();l<f&&t(".center-row .content-left .inner-bottom").css("position","relative"),u<g&&t(".center-row .content-right .inner-bottom").css("position","relative");var p=t(".content-left .content-inner").height(),m=t(".content-right .content-inner").height();if(p>m){var d=p;t(".center-row .content-inner").css("min-height",d)}if(p<m){d=m;t(".center-row .content-inner").css("min-height",d)}}if(a>0&&t(document).width()<1024){var b=h+t(".content-left .content-inner").height();t(".content-left .content-inner").css("min-height",b)}if(t(document).width()<1024){l=t(".content-left .content-inner").height(),u=t(".content-right .content-inner").height(),f=t(".content-left .content-inner .inner-bottom").height(),g=t(".content-right .content-inner .inner-bottom").height();l<f&&t(".center-row .content-left .inner-bottom").css("position","relative"),u<g&&t(".center-row .content-right .inner-bottom").css("position","relative")}},n=function(){if(t(document).width()>=1024){t(".center-row").height(),t(".content-left").height(),t(".content-right").height();var e=t(".content-left .content-inner").height(),n=t(".content-right .content-inner").height(),o=t(".content-left .content-inner .inner-bottom").height(),i=t(".content-right .content-inner .inner-bottom").height();o>i&&t(".content-right .content-inner").animate({"min-height":e},"slow"),i>o&&t(".content-left .content-inner").animate({"min-height":n},"slow")}var r=t(".content-left .content-inner").height(),s=t(".content-right .content-inner").height(),c=t(".content-left .content-inner .inner-bottom").height(),a=t(".content-right .content-inner .inner-bottom").height();r<c?t(".center-row .content-left .inner-bottom").css("position","relative"):c<r&&t(".center-row .content-left .inner-bottom").css("position","absolute"),s<a?t(".center-row .content-right .inner-bottom").css("position","relative"):a<s&&t(".center-row .content-right .inner-bottom").css("position","absolute")},o=function(){if(t(window).width()>600){var e=parseInt(t(".sidebar-inner").css("padding-bottom")),n=t(".main > footer").height();if(e<n)t(".sidebar-inner").css("padding-bottom",n);t(".js-content-top").removeAttr("style");var o=t(document).height();if(t(".js-content-top").height()<o)t(".js-content-top").css("min-height",o)}else t(".js-content-top").css("min-height",0)},i=function(){var e=t(".site-title:visible");e.is(":empty")&&t(".site-title-editable").appendTo(e)}}(jQuery),function(t){t.fn.extend({jsPopupMenu:function(e){return this.each(function(){var e=t(this),n=e.find(".js-popup-menu-btn"),o=e.find(".js-popup-menu-popover");o.hide(),n.on("click",function(e){e.preventDefault(),o.is(":hidden")&&(o.show(),n.addClass("open"),setTimeout(function(){t(document).on("click.js-popup-menu-click",function(){o.hide(),n.removeClass("open"),t(this).off(".js-popup-menu-click")})},0))})}),this}})}(jQuery),function(t){t.jquerySelect={init:function(e,n){e.wrap('<div class="jq-select" />');var o=e.parent(),i=t('<div class="jq-select-arrow"></div>'),r=t('<div class="jq-select-content" />'),s=t('<div class="jq-select-inner" />').text(e.children(":selected").text());r.append(s),o.append(r),o.append(i),e.hasClass("form_field_size_large")?(e.removeClass("form_field_size_large"),o.addClass("form_field_size_large")):e.hasClass("form_field_size_medium")?(e.removeClass("form_field_size_medium"),o.addClass("form_field_size_medium")):e.hasClass("form_field_size_small")?(e.removeClass("form_field_size_small"),o.addClass("form_field_size_small")):o.addClass("form_field_size_small"),e.change(t.proxy(function(){s.text(e.children(":selected").text())},this)),e.keyup(t.proxy(function(){s.text(e.children(":selected").text())},this)),e.bind("update",t.proxy(function(){s.text(e.children(":selected").text())},this))}},t.fn.extend({jqSelect:function(e){return this.each(function(){var n=t.extend({},e);t.jquerySelect.init(t(this),n)}),this}})}(jQuery),function(t){var e=t("body").hasClass("blog-article-page"),n=function(e,n){return function(e,n){if(e&&n){"string"==typeof e&&(e=e.replace(/rgba?\(/,"").replace(/\)/,"").split(","),t.each(e,function(t,n){e[t]=+n})),"string"==typeof n&&(n=n.replace(/rgba?\(/,"").replace(/\)/,"").split(","),t.each(n,function(t,e){n[t]=+e})),"object"==typeof e&&e.hasOwnProperty("length")&&3==e.length&&e.push(1),"object"==typeof n&&n.hasOwnProperty("length")&&3==n.length&&n.push(1);var o=[0,0,0,0];return o[3]=1-(1-n[3])*(1-e[3]),0===o[3]&&(o[3]=1e-6),o[0]=Math.min(n[0]*n[3]/o[3]+e[0]*e[3]*(1-n[3])/o[3],255),o[1]=Math.min(n[1]*n[3]/o[3]+e[1]*e[3]*(1-n[3])/o[3],255),o[2]=Math.min(n[2]*n[3]/o[3]+e[2]*e[3]*(1-n[3])/o[3],255),t.map(o,function(t){return Math.floor(t)})}}(e||[255,255,255,1],n||[255,255,255,1])},o=function(t,e){var o=n(t,e);return Math.round((.2126*+o[0]+.7152*+o[1]+.0722*+o[2])/2.55)/100};window.site=t.extend(window.site||{},{contentHalfBgPreview:function(e,n,i){var r=function(){contentHalfBgCombinedLightness>=.5?t(n).find(".js-background-type").addClass("light-background").removeClass("dark-background"):t(n).find(".js-background-type").addClass("dark-background").removeClass("light-background")},s=e.imageSizes?function(t,e){for(var n,o=0,i=t.length;o<i;o++){if(t[o].width<e)return n||t[o];n=t[o]}return t[t.length-1]}(e.imageSizes,t(window).width()):"none",c=t(n).css("background-image"),a=e.image&&""!==e.image?"url("+s.url+")":"none",h=e.imageSizes&&""!==e.imageSizes?e.imageSizes:null,l=e.color&&""!==e.color?e.color:"rgba(0,0,0,0)",u=(e.colorData&&""!==e.colorData&&e.colorData.a,e.colorData&&""!==e.colorData&&e.colorData.lightness,t("<img>")),f=t("<canvas>"),g=e.image&&""!==e.image?e.image:null;g?function(t,e){for(var n=t.length;n--;)if(e.indexOf(t[n].url.trim())>-1)return!0;return!1}(h,c)?(contentHalfBgCombinedLightness=o(i.contentHalfBgImageColor,l),r()):(u.attr("src",g.replace(/.*\/(photos|voogstock)/g,"/photos")),u.on("load",function(){ColorExtract.extract(u[0],f[0],function(t){i.contentHalfBgImageColor=t.bgColor?t.bgColor:"rgba(255,255,255,1)",contentHalfBgCombinedLightness=o(i.contentHalfBgImageColor,l),r()})})):(contentHalfBgCombinedLightness=o("rgba(255,255,255,1)",l),r()),a.split("/").pop()!=c.split("/").pop()&&t(n).css({"background-image":a}),t(n).find(".background-color").css({"background-color":l})},contentHalfBgCommit:function(n,o){var i=t.extend(!0,{},n);i.image=n.image||"",i.imageSizes=n.imageSizes||"",i.color=n.color||"rgba(255,255,255,0)",i.combinedLightness=contentHalfBgCombinedLightness,e?Edicy.articles.currentArticle.setData(o,i):pageData.set(o,i)},toggleFlags:function(){t(".js-option-toggle-flags").on("click",function(e){if(e.stopPropagation(),t(this).hasClass("js-flag-disable-btn"))var n=!1;else n=!0;t(this).toggleClass("js-flag-disable-btn"),t(".js-menu-lang-wrap").toggleClass("flags-enabled flags-disabled"),siteData.set("flags_state",n)})}})}(jQuery);